<!DOCTYPE html>
<html>
<head>
	<title>RPi Tune Pipeline</title>
    <style>
    html, body {
    	background: lightgray;
        font-family: Verdana, sans-serif;
    }
    /* CAMERA STREAM TAB */
    #top {
    	position: absolute;
        left: 5px;
        top: 5px;
        bottom: 5px;
        width: 60%;
        background: black;
        background-image: url("/stream");
        background-repeat: no-repeat;
        background-size: contain;
        background-position: center;
    }
    /* CONFIG TAB */
    #bottom {
    	position: absolute;
        right: 5px;
        bottom: 5px;
        top: 5px;
        width: calc(40% - 25px);
        background: darkgray;
        overflow-y: scroll;
        padding: 5px;
    }
    </style>
</head>
<body>

<!-- CAMERA STREAM TAB -->
<div id="top">

</div>

<!-- CONFIG TAB-->
<div id="bottom">
<h3>Configure Pipeline</h3>
<hr>

<form action="/publish" method="POST">

<b>CONE</b><br>
H: <input type="number" min="0.0" max="180.0" value="19.424460431654676" name="coneMinH" step="any"> - <input type="number" min="0.0" max="180.0" value="33.753353652972216" name="coneMaxH" step="any"><br>
S: <input type="number" min="0.0" max="255.0" value="217.7988964760395" name="coneMinS" step="any"> - <input type="number" min="0.0" max="255.0" value="255.0" name="coneMaxS" step="any"><br>
L: <input type="number" min="0.0" max="255.0" value="110.07194244604317" name="coneMinL" step="any"> - <input type="number" min="0.0" max="255.0" value="255.0" name="coneMaxL" step="any"><br>

<br>

<b>CUBE</b><br>
H: <input type="number" min="0.0" max="180.0" name="cubeMinH" step="any"> - <input type="number" min="0.0" max="180.0" name="cubeMaxH" step="any"><br>
S: <input type="number" min="0.0" max="255.0" name="cubeMinS" step="any"> - <input type="number" min="0.0" max="255.0" name="cubeMaxS" step="any"><br>
L: <input type="number" min="0.0" max="255.0" name="cubeMinL" step="any"> - <input type="number" min="0.0" max="255.0" name="cubeMaxL" step="any"><br>

<br>

<b>CONFIG</b><br>
Name: <input type="text" value="Untitled" name="title"><br>
Venue: <input type="text" value="Unknown" name="venue"><br>

<br>
<input type="submit" value="Publish">
</form>
<br><br>
<i><b>Warning: </b>barely any input sanitization is done here. Make sure the data you enter is accurate.</i>
<br><br>
Once this is done, change the config file path to match the new one created.
</div>

<!-- UPDATE -->
<script>

function notifyServer() {
    var x = new XMLHttpRequest();
    x.open("POST", "/update");
    x.send(JSON.stringify([this, document.getElementsByName(i)[0].value]));
}

const inputs = ["coneMinH", "coneMaxH", "coneMinS", "coneMaxS", "coneMinL", "coneMaxL", "cubeMinH", "cubeMaxH", "cubeMinS", "cubeMaxS", "cubeMinL", "cubeMaxL", ];

inputs.forEach(function(i) {
    i.addEventListener("input", notifyServer.bind(i));
})

</script>
</body>
</html>